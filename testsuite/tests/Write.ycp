{

// test for HttpServer::Write() write configuration
// $id$

    include "testsuite.ycp";

    TESTSUITE_INIT([
        $[ "sysconfig": $[ "personal-firewall": $[ "REJECT_ALL_INCOMING_CONNECTIONS": "yes" ] ] ]
    ], nil);
    
    import "HttpServer";

    HttpServer::settings = $[
	"settings": $[
	    "enabled" : true
	],
	"modules" : $[
	    "ssl": $[
		"status": true,
	    ],
	    "negotiation": $[
		"status": false
	    ],
	],
	"defaulthost": $[
	    "ServerName": "blablabla.example.com",
	    "Listen": [ "1.2.3.4:8080", "3128" ]
	]
    ];
    
    HttpServer::modified = true;
    
    TEST( ``(HttpServer::Write()), [
	$[ "init": $[ "scripts": $[ "exists": true ] ] ],
	[],
	$[ "target" : $[ "bash_output" : $[ "exit": 0, "stdout" : "", "stderr": "" ] ] ]
    ], nil );

}
